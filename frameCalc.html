<html>
<head>
<title>Frame Time Calculator</title>
<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script>
  var fps = 30;
  
  function ComputeDifference() {
      var start = ParseFrameTime($("#frameTimeStart").val());
      var end = ParseFrameTime($("#frameTimeEnd").val());

      $("#frameTimeDiff").val(ToFrameTime(end - start));
      // hours;minutes;seconds;frames
      return false;
  }

  function ComputeEnd() {
      var start = ParseFrameTime($("#frameTimeStart").val());
      var difference = ParseFrameTime($("#frameTimeDiff").val());

      $("#frameTimeEnd").val(ToFrameTime(start + difference));

      return false;
  }

  function ParseFrameTime(textTime) {
      textTime = textTime.replace(":", ";");
      var times = textTime.split(";").reverse();
      var frameCount = parseInt(times[0]);

      if (times[1]) {
          frameCount += parseInt(times[1] * fps);
      }

      if (times[2]) {
          frameCount += parseInt(times[2] * fps * 60);
      }

      return frameCount;
  }

  function ToFrameTime(frameCount) {
      var totalSeconds = Math.floor(frameCount / fps);
      var frames = frameCount - (totalSeconds * fps);
      
	  var hours = Math.floor(totalSeconds / 3600);
	  totalSeconds -= hours * 3600;
	  
      var minutes = Math.floor(totalSeconds / 60);
      var seconds = totalSeconds - (minutes * 60);      

      return Pad2(hours) + ";" + Pad2(minutes) + ";" + Pad2(seconds) + ";" + Pad2(frames);
  }

function Pad2(value) {
  if (IsNaN(value)) {
    value = 0;
  }
    	
  return String("00" + value).slice(-2);
}

$(function () {
  $("#framesPerSecond").change(function () {
  	fps = $("#framesPerSecond").val();
  });
  $("#frameTimeDiff,#frameTimeStart").focusout(ComputeEnd);
  $("#frameTimeEnd").focusout(ComputeDifference);
});
</script>
<style>
  input {
  left: 50px;
  }
</style>
</head>
<body>
  Use this calculator to add and subtract values in the format of "hours;minutes;seconds;frames"<br/>
  <br/>
<table>
  <tr><td>
PFS:</td><td>
<input type="text" id="framesPerSecond" value="30" />
</td></tr>
<tr><td>
Start:</td><td>
<input type="text" id="frameTimeStart" />
</td></tr>
<tr><td>Difference:</td><td>
<input type="text" id="frameTimeDiff" />
</td></tr>
<tr><td>End:</td><td>
<input type="text" id="frameTimeEnd" />
</td></tr>
</table>
<br/>

</body>
</html>
